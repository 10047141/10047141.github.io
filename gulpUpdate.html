<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>描述 | csF</title>
    <meta name="description" content="仅用于学习，非商业用途">
    <link rel="icon" href="/img/icon.jpg">
    
    <link rel="preload" href="/assets/css/styles.a28dd14a.css" as="style"><link rel="preload" href="/assets/js/app.a28dd14a.js" as="script"><link rel="preload" href="/assets/js/2.0d4a1ec5.js" as="script"><link rel="prefetch" href="/assets/css/3.styles.2ce1774a.css"><link rel="prefetch" href="/assets/css/5.styles.c3328a4c.css"><link rel="prefetch" href="/assets/js/1.f2052076.js"><link rel="prefetch" href="/assets/js/10.ebc6a712.js"><link rel="prefetch" href="/assets/js/3.2ce1774a.js"><link rel="prefetch" href="/assets/js/4.02357d72.js"><link rel="prefetch" href="/assets/js/5.c3328a4c.js"><link rel="prefetch" href="/assets/js/6.0887a5b7.js"><link rel="prefetch" href="/assets/js/7.d99a9b3e.js"><link rel="prefetch" href="/assets/js/8.ee3fabfe.js"><link rel="prefetch" href="/assets/js/9.90d68d5a.js">
    <link rel="stylesheet" href="/assets/css/3.styles.2ce1774a.css"><link rel="stylesheet" href="/assets/css/5.styles.c3328a4c.css"><link rel="stylesheet" href="/assets/css/styles.a28dd14a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">csF</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">博客中心</a></div><div class="nav-item"><a href="https://github.com/10047141/10047141.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">博客中心</a></div><div class="nav-item"><a href="https://github.com/10047141/10047141.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">一、首页</a></li><li><a href="/guide/" class="sidebar-link">二、VuePress的搭建过程</a></li><li><a href="/eventUtils.html" class="sidebar-link">三、跨浏览器支持js事件</a></li><li><a href="/cssMiddleAndCenter.html" class="sidebar-link">四、css基本的垂直居中技巧</a></li><li><a href="/gulpStydy.html" class="sidebar-link">五、gulp压缩合并js、css</a></li><li><a href="/gulpUpdate.html" class="active sidebar-link">六、gulp自动更新版本号</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gulpUpdate.html#描述" class="sidebar-link">描述</a></li><li class="sidebar-sub-header"><a href="/gulpUpdate.html#步骤" class="sidebar-link">步骤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gulpUpdate.html#_1-步骤1" class="sidebar-link">1. 步骤1</a></li><li class="sidebar-sub-header"><a href="/gulpUpdate.html#_2-步骤2" class="sidebar-link">2. 步骤2</a></li></ul></li><li class="sidebar-sub-header"><a href="/gulpUpdate.html#进阶" class="sidebar-link">进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gulpUpdate.html#_1-步骤1-2" class="sidebar-link">1. 步骤1</a></li><li class="sidebar-sub-header"><a href="/gulpUpdate.html#_2-步骤2-2" class="sidebar-link">2. 步骤2</a></li></ul></li><li class="sidebar-sub-header"><a href="/gulpUpdate.html#注意事项" class="sidebar-link">注意事项</a></li></ul></li><li><a href="/jQureyRule.html" class="sidebar-link">七、jQuery开发规范</a></li><li><a href="/config.html" class="sidebar-link">八、敬请期待..</a></li></ul> </div> <div class="page"> <div class="content"><p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p> <h2 id="描述"><a href="#描述" aria-hidden="true" class="header-anchor">#</a> 描述</h2> <p><strong>利用gulp,当引入文件改动时，版本号自动更新</strong></p> <h2 id="步骤"><a href="#步骤" aria-hidden="true" class="header-anchor">#</a> 步骤</h2> <h3 id="_1-步骤1"><a href="#_1-步骤1" aria-hidden="true" class="header-anchor">#</a> 1. 步骤1</h3> <p><strong>安装gulp-asset-rev，这是一个gulp.js的插件，通过添加内容哈希来替换文件的名称</strong></p> <div class="language-shell extra-class"><pre class="language-text"><code> cnpm i gulp-asset-rev --save-dev
</code></pre></div><p><strong>gulpfile.js文件配置如下所示</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> assetRev <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-asset-rev'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./res/*.html&quot;</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">assetRev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行命令</strong></p> <div class="language-shell extra-class"><pre class="language-text"><code>gulp update
</code></pre></div><p><strong>结果如下：</strong> <img src="/assets/img/1.0bdfef5b.jpg" alt="在这里插入图片描述"> <strong>显然不符合预期,文件名和源文件名不一致！</strong></p> <h3 id="_2-步骤2"><a href="#_2-步骤2" aria-hidden="true" class="header-anchor">#</a> 2. 步骤2</h3> <p><strong>针对步骤1存在的问题进行如下调整，进入到./node_modules/_gulp-asset-rev@0.0.15@gulp-asset-rev文件夹下的index.js文件</strong> <img src="data:image/jpeg;base64,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" alt="在这里插入图片描述"></p> <p><strong>将index.js的代码进行修改...</strong> <img src="/assets/img/3.73558f77.jpg" alt="在这里插入图片描述"></p> <p><strong>重新运行命令 gulp update</strong> <img src="/assets/img/4.7a79c197.jpg" alt="在这里插入图片描述"></p> <p><strong>这样就可以实现gulp自动化更新版本号了</strong></p> <h2 id="进阶"><a href="#进阶" aria-hidden="true" class="header-anchor">#</a> 进阶</h2> <p><strong>在实际项目开发中有时候需要将多个.js文件或者.css文件合并成一个文件，如main.js或main.css。
但通过gulp-asset-rev打包的HTML文件并不会自动更新文件的引用</strong> <strong>接下来将实现自动化更新文件的引用</strong></p> <h3 id="_1-步骤1-2"><a href="#_1-步骤1-2" aria-hidden="true" class="header-anchor">#</a> 1. 步骤1</h3> <p><strong>配置gulp，实现js文件和css文件合并压缩方法。</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> assetRev <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-asset-rev'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取 uglify 模块（用于压缩 JS）</span>
<span class="token keyword">var</span> uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-uglify'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取 cleancss 模块（用于压缩 CSS）</span>
<span class="token keyword">var</span> cleanCSS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-clean-css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//合并</span>
<span class="token keyword">var</span> concat <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-concat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//html 更新版本号</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./res/*.html&quot;</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">assetRev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 合并压缩css</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'csscompress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">1.</span> 找到文件
 <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./res/css/*.css'</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">'main.css'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// 2. 压缩文件</span>
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cleanCSS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token operator">/</span><span class="token operator">/</span>     <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">3.</span> 另存压缩后的文件
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist/css'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">/</span><span class="token operator">/</span> 合并压缩js
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'jscompress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./res/js/*.js'</span><span class="token punctuation">)</span>
     <span class="token comment">//1. 合并文件</span>
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">2.</span> 压缩文件
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">3.</span> 另存压缩后的文件
     <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist/js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token operator">/</span><span class="token operator">/</span> gulp本地版本需要<span class="token number">4.0</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> gulp<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token string">'jscompress'</span><span class="token punctuation">,</span> <span class="token string">'csscompress'</span><span class="token punctuation">,</span><span class="token string">'update'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>打包后可以发现HTML文件的引用并不是main.js已经main.css</strong></p> <h3 id="_2-步骤2-2"><a href="#_2-步骤2-2" aria-hidden="true" class="header-anchor">#</a> 2. 步骤2</h3> <p><strong>修改./node_modules/_gulp-asset-rev@0.0.15@gulp-asset-rev文件夹下的index.js文件</strong> <img src="/assets/img/5.77e20bf6.jpg" alt="在这里插入图片描述"></p> <p><strong>执行gulp hello</strong> <img src="/assets/img/6.4c6e14d2.jpg" alt="在这里插入图片描述"></p> <p><strong>搞定！</strong></p> <h2 id="注意事项"><a href="#注意事项" aria-hidden="true" class="header-anchor">#</a> 注意事项</h2> <p>** 整合的main.css和main.js在源文件中一定要有，否则将无法将其他的.css/.js文件删除**</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/gulpStydy.html" class="prev">
          五、gulp压缩合并js、css
        </a></span> <span class="next"><a href="/jQureyRule.html">
          七、jQuery开发规范
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/2.0d4a1ec5.js" defer></script><script src="/assets/js/app.a28dd14a.js" defer></script>
  </body>
</html>
